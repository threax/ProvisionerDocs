<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating Services</title>
    <link rel="stylesheet" href="/ProvisionerDocs/lib/bootstrap/dist/css/bootstrap-darkly.css?linkver=20210602120907" type="text/css">

</head>

<body>

    <nav class="navbar navbar-dark bg-dark" data-hr-run="edity.theme.layouts.default">
        <button class="navbar-toggler" type="button" data-target="#sidebar" data-toggle="sidebar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <a class="navbar-brand" href="/ProvisionerDocs/">Threax Provisioner</a>
    </nav>

    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar">
            <div class="mainTreeMenu" data-hr-controller="treeMenu" data-hr-config-urlroot="/ProvisionerDocs/" data-hr-config-menu="/ProvisionerDocs/menus/mainMenu.json" data-hr-config-scrollelement="#sidebar-wrapper" data-hr-model-component="sidebarMenuComponent" data-hr-config-treemenu-version="6FC36FA8EE66100CB7F38A1F6B14E0972C79BE6CEAE5CE8DF3FA55D7F0E71E4D">
                <ul class="sidebarMenu" data-hr-model="childItems" data-hr-model-component="sidebarMenuComponent">
                    <template data-hr-component="sidebarMenuComponent">
                        <li class="folder">
                            <div class="item" data-hr-on-click="toggleMenuItem" data-hr-toggle="current" data-hr-class-on="currentFolder"><span data-hr-toggle="children" class="glyphicon" data-hr-class-on="glyphicon-folder-open" data-hr-class-off="glyphicon-folder-close"></span> {{name}}</div>
                            <div class="children" data-hr-model="children" data-hr-model-component="sidebarMenuComponent" data-hr-toggle="children" data-hr-class-on="expanded" data-hr-style-off="display:none;"></div>
                        </li>
                    </template>
                    <template data-hr-variant="link">
                        <li class="link">
                            <a href="{{urlRoot}}{{link}}" target="{{target}}">
                                <div class="mainBlock" data-hr-toggle="current" data-hr-class-on="currentLink">
                                    {{name}}
                                </div>
                            </a>
                        </li>
                    </template>
                    <template data-hr-variant="root">
                        <div class="children" data-hr-model="children" data-hr-model-component="sidebarMenuComponent" data-hr-toggle="children" data-hr-class-on="expanded" data-hr-style-off="display:none;"></div>
                    </template>
                </ul>
            </div>
        </div>

        <!-- Page Content -->
        <div id="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 pageContent">
                        <h1>Creating Services</h1>
<p>Services and controllers may seem very similar. Indeed they mostly are except services can lookup and return values. This gives them more variation than controllers that can only provide a Run method with an optional Configuration argument. Ideally services are testable independently. Services can inject other services, but they should not inject controllers. We don&#39;t want to create dependencies back and forth. Services can consume other services or nothing and Controllers can consume other Controllers and Services.</p>
<p>Otherwise the work these perform is pretty open ended. Create the service and its functions and make an interface to use for injection and mocking. The reference implementation has several services that take care of various common needs the controllers have.</p>
<h2>Doing Work on Shutdown</h2>
<p>A cool thing you can do with services is implement the IDisposable interface for them. Now, when the provisioning is complete or an error occurs and app shuts down the Dispose method will be called and your service can do cleanup. For example you could have a service that opens up firewalls. By implementing IDisposable you can close the firewalls when the app shuts down. This frees individual controllers from needing to handle closing things and leaves them open for future work during the run, which improves performance.</p>
                        <div class="footer"></div>
                    </div>
                </div>
                <div class="footer-padding"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/ProvisionerDocs/lib/tslib.js?linkver=20210602120907"></script>
<script type="text/javascript" src="/ProvisionerDocs/lib/jquery/dist/jquery.min.js?linkver=20210602120907"></script>
<script type="text/javascript" src="/ProvisionerDocs/lib/popper.js/dist/popper.min.js?linkver=20210602120907"></script>
<script type="text/javascript" src="/ProvisionerDocs/lib/bootstrap/dist/js/bootstrap.min.js?linkver=20210602120907"></script>
<script type="text/javascript" src="/ProvisionerDocs/lib/tsbin.prod.js?linkver=20210602120907"></script>
<script type="text/javascript" src="/ProvisionerDocs/lib/hr-run.js?linkver=20210602120907"></script>

</body>

</html>